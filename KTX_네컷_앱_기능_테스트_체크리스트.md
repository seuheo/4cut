# KTX 네컷 앱 기능 테스트 체크리스트

**문서 버전**: 1.0  
**작성일**: 2025년 1월 14일  
**대상 버전**: MVP v2.0 (잠신네컷 기능 통합 완료)  
**테스트 범위**: README.md v20.0, UAT_Plan_Phase4.2.md, Phase4.2.1_Development_Scope.md 기반

---

## 📋 테스트 전 준비사항

- [ ] Android 13+ (API 24+) 디바이스/에뮬레이터 준비
- [ ] 갤러리에 최소 4장 이상의 테스트 사진 준비
- [ ] 인터넷 연결 확인 (필요 시)
- [ ] Logcat 필터 설정: `tag:com.example.a4cut` 또는 `package:com.example.a4cut`

---

## 1. 핵심 기능: 4컷 사진 생성 및 공유 (Phase 3.x, 4.7)

### 1.1 앱 권한 (Android 13+ 기준)

- [ ] 앱 첫 실행 시 미디어(사진) 접근 권한 요청 팝업이 뜨는가?
- [ ] 권한을 거부했을 때 갤러리 접근이 차단되고, 권한을 요청하는 UI가 표시되는가?
- [ ] 권한을 허용했을 때 갤러리 접근이 가능한가?

### 1.2 사진 선택 (FrameScreen)

- [ ] '갤러리에서 사진 선택' 버튼이 동작하는가?
- [ ] 갤러리에서 사진을 4장 미만 (예: 3장) 선택하고 '만들기' 시도 시 에러/안내 메시지가 표시되는가?
- [ ] 갤러리에서 사진을 정확히 4장 선택할 수 있는가?
- [ ] 선택한 4장의 사진이 2x2 그리드 UI에 정상적으로 표시되는가?

### 1.3 프레임 선택 (FrameScreen)

- [ ] 프레임 캐러셀(FrameCarousel)이 UI에 표시되는가?
- [ ] 캐러셀이 추상적인 그래픽이 아닌, 실제 프레임 미리보기 이미지로 표시되는가? (Phase 4.7)
- [ ] 5가지 테마 프레임(기본, 부산, 전주, 서울, 경주)을 모두 선택할 수 있는가?

### 1.4 롱 폼 프레임 크롭 기능 (MVP v2.0 - 최신 기능)

- [ ] 롱 폼 프레임(Long Form Black/White) 선택 시 크롭 기능이 자동으로 활성화되는가?
- [ ] 각 슬롯(1~4번)에 이미지 선택 시 해당 슬롯의 비율에 맞는 크롭 화면으로 이동하는가?
- [ ] 크롭 화면에서 이미지 비율이 프레임 슬롯 비율에 맞게 자동 조정되는가?
- [ ] 크롭 완료 후 원래 화면으로 돌아와서 크롭된 이미지가 해당 슬롯에 정상적으로 표시되는가?
- [ ] 모든 4개 슬롯에 크롭된 이미지가 정상적으로 배치되는가?

### 1.5 합성 및 저장

- [ ] 프레임과 사진 4장을 선택하고 '만들기' 버튼 클릭 시, 합성 결과 미리보기 다이얼로그(ImagePreviewDialog)가 뜨는가?
- [ ] '저장' 버튼 클릭 시, 갤러리(MediaStore)에 최종 합성본(JPEG)이 저장되는가?
- [ ] 저장된 이미지가 인스타그램 스토리에 최적화된 1080x1920 해상도가 맞는가?
- [ ] 사진 정보가 앱 내부 Room 데이터베이스(PhotoEntity)에도 저장되는가? (홈 화면에서 확인)
- [ ] '인스타그램 공유' 버튼 클릭 시, FileProvider를 통해 인스타그램 스토리 공유 화면으로 즉시 연결되는가?

---

## 2. MVP v2.0 핵심 기능: JSON 프레임 시스템 및 동영상 (Phase 1, 2)

### 2.1 JSON 기반 동적 프레임 시스템 (Phase 1)

- [ ] 앱 실행 시 `frames.json` 파일이 정상적으로 로드되는가? (Logcat 확인)
- [ ] JSON 슬롯 정보가 포함된 프레임(예: `long_form_black`)을 선택할 수 있는가?
- [ ] JSON 슬롯 정보를 사용한 이미지 합성이 정상적으로 작동하는가?
- [ ] 기존 프레임(slots가 null인 프레임)도 정상적으로 작동하는가? (하위 호환성)
- [ ] 로그에서 "JSON에서 X개의 프레임 슬롯 정보 로드 완료" 메시지가 확인되는가?

### 2.2 즉시 저장 아키텍처 (Phase 2)

- [ ] 이미지 저장 직후 홈 화면에서 사진이 즉시 표시되는가? (약 20ms 이내)
- [ ] 저장 직후 캘린더 화면에서 사진이 있는 날짜가 하이라이트되는가?
- [ ] 저장 직후 DB에 `videoPath = null`로 즉시 저장되는가? (로그 확인)

### 2.3 백그라운드 동영상 생성 (Phase 2)

- [ ] 이미지 저장 후 백그라운드에서 동영상 생성이 시작되는가? (로그 확인)
- [ ] 동영상 생성이 완료되면 DB에 `videoPath`가 업데이트되는가?
- [ ] 동영상 파일이 `/storage/emulated/0/Android/data/com.example.a4cut/files/videos/` 경로에 생성되는가?
- [ ] 동영상 파일 형식이 MP4인가?
- [ ] 사진 상세 화면에서 동영상이 있는 경우 동영상 공유가 가능한가?

---

## 3. 포토로그: 홈 화면 (Phase 4.1, 4.3.1)

### 3.1 홈 화면 (HomeScreen)

- [ ] (Phase 4.3.1 기준) 홈 화면 상단에 가장 최근에 찍은 사진 1개가 표시되는가?
- [ ] 하단에 달력(CalendarView)이 표시되는가?
- [ ] 사진이 있는 날짜가 달력에 하이라이트/마크 되는가?
- [ ] [이전 버전 확인] (Phase 4.2 기준) "KTX와 함께한 N개의 추억" 타이틀과 가로 스크롤 캐러셀이 표시되는가?
- [ ] (Phase 4.2 기준) 캐러셀의 PhotoLogCard를 클릭하면 '사진 상세 보기' 화면으로 이동하는가?

---

## 4. 포토로그: 사진 상세 및 편집 (Phase 4.2.1)

### 4.1 사진 상세 보기 (PhotoDetailScreen)

- [ ] 사진의 전체 화면 보기 및 저장된 모든 메타데이터(제목, 위치, 날짜, 태그, 설명, 날씨, 감정 등)가 표시되는가?
- [ ] '즐겨찾기' 토글 버튼이 동작하며, 상태가 저장되는가?
- [ ] '삭제' 버튼 클릭 시, 확인 다이얼로그가 뜨는가?
- [ ] 다이얼로그에서 '확인' 클릭 시, 사진이 DB에서 삭제되고 홈 화면에서도 사라지는가?
- [ ] 동영상이 있는 경우 동영상 공유 버튼이 표시되는가?

### 4.2 사진 편집 (PhotoEditScreen / Phase 4.2.1)

- [ ] '편집' 버튼 클릭 시, 편집 화면으로 진입하는가?
- [ ] 1차 핵심 기능(제목, 위치, 태그, 설명) 편집 및 저장이 가능한가?
- [ ] 2차 확장 기능(날씨, 감정, 동반자, 여행 목적 등) 편집 및 저장이 가능한가? (드롭다운/텍스트 입력)
- [ ] 편집 저장 후, '상세 보기' 화면에 변경된 내용이 즉시 반영되는가?

---

## 5. 포토로그: 고급 검색 및 필터링 (Phase 4.2.2)

### 5.1 검색 화면 (SearchScreen)

- [ ] 텍스트 검색 (제목, 태그, 설명, 동반자 기반)이 동작하는가?
- [ ] 필터링: 날짜별, 위치별, 계절별, 날씨별, 감정별 필터가 동작하는가?
- [ ] 다중 조건 필터링 (예: 계절 '여름' + 감정 '즐거움')이 정상적으로 동작하는가?
- [ ] 정렬 옵션 (최신순, 오래된순, 즐겨찾기순 등)이 동작하는가?
- [ ] 검색 히스토리(최근 검색어)가 저장되고, 재사용 가능한가?

---

## 6. 부가 기능: 화면 및 네비게이션 (Phase 4.4)

### 6.1 하단 네비게이션

- [ ] 하단 네비게이션 바 (Home, Frame, Calendar, Profile, Settings)가 정상적으로 표시되는가?
- [ ] 각 아이콘을 클릭했을 때 올바른 화면으로 즉시 전환되는가?
- [ ] 네비게이션 전환 시 크래시가 발생하지 않는가?

### 6.2 달력 화면 (CalendarScreen)

- [ ] 실제 달력이 표시되며, '월' 변경 기능이 동작하는가?
- [ ] 사진이 저장된 날짜가 달력에 하이라이트/마크 되는가?
- [ ] 특정 날짜를 클릭하면 해당 날짜의 사진 목록이 표시되는가?

### 6.3 프로필 화면 (ProfileScreen)

- [ ] 사용자 정보 (총 사진 수, 즐겨찾기 수)가 정확히 표시되는가?
- [ ] 통계 (가장 많이 사용한 프레임)가 정상적으로 집계되는가?

### 6.4 설정 화면 (SettingsScreen)

- [ ] 앱 정보 (버전)가 표시되는가?
- [ ] 테마 설정 (시스템/다크 모드) 토글이 동작하며, 앱 전체 테마가 즉시 변경되는가?
- [ ] 데이터 관리 (캐시 정리 등) 기능이 동작하는가?

---

## 7. 안정성 및 UI/UX

### 7.1 화면 회전

- [ ] 모든 주요 화면(홈, 상세, 편집, 검색, 프레임 선택)에서 화면 회전 시 앱이 강제 종료되지 않는가?
- [ ] 화면 회전 후에도 입력 중이던 데이터나 상태가 유지되는가? (예: 편집 화면 텍스트)
- [ ] 화면 회전 후에도 선택된 프레임과 사진이 유지되는가?

### 7.2 UI/UX (Phase 4.5, 4.8)

- [ ] 앱 전체 디자인이 Material Design 3 가이드라인을 준수하는가?
- [ ] 버튼, 아이콘, 폰트 등이 세련되게 개선되었는가? (그라데이션, 둥근 모서리 등)
- [ ] 토스 스타일 UI/UX가 적용되어 있는가? (Phase 4.8)
- [ ] 홈 화면이 LazyColumn 기반의 스크롤 가능한 레이아웃인가?

### 7.3 성능

- [ ] 사진 상세 보기 화면이 3초 이내에 로드되는가?
- [ ] 로딩, 저장, 공유 시 적절한 로딩 인디케이터나 성공/실패 메시지가 표시되는가?
- [ ] 이미지 합성 작업이 백그라운드에서 수행되어 UI가 멈추지 않는가?

### 7.4 에러 처리 및 안정성

- [ ] NullPointerException이 발생하지 않는가? (최근 해결된 문제)
- [ ] 네비게이션 경고 (`Ignoring popBackStack`)가 발생하지 않는가?
- [ ] 크롭 완료 후 이미지가 정상적으로 반영되는가? (최근 해결된 문제)
- [ ] StateFlow combine 관련 크래시가 발생하지 않는가? (최근 해결된 문제)
- [ ] 앱이 예기치 않게 강제 종료되지 않는가?

---

## 8. 최신 버그 수정 검증 (2025년 1월 14일)

### 8.1 네비게이션 안정성

- [ ] 프레임이 선택되지 않은 상태에서 PhotoSelectionScreen으로 이동 시 FrameSelectionScreen으로 리다이렉트되는가?
- [ ] 네비게이션 전환 시 `popBackStack` 경고가 발생하지 않는가?

### 8.2 크롭 기능 안정성

- [ ] 크롭 완료 후 `processSingleImageAt`이 정상적으로 호출되는가?
- [ ] 크롭된 이미지가 UI에 즉시 반영되는가?
- [ ] `uiUpdateTrigger`가 정상적으로 작동하여 UI가 업데이트되는가?

### 8.3 StateFlow 초기화 안정성

- [ ] 앱 시작 시 `HomeViewModel`의 `combine` 함수가 정상적으로 초기화되는가?
- [ ] `filteredPhotosForMap`과 `datesWithPhotos`가 정상적으로 작동하는가?
- [ ] NullPointerException이 발생하지 않는가?

---

## 📊 테스트 결과 기록

### 테스트 실행 정보
- **테스트 날짜**: _______________
- **테스트 환경**: _______________
- **테스트 버전**: MVP v2.0
- **테스터**: _______________

### 전체 통과율
- **총 항목 수**: _______________
- **통과 항목**: _______________
- **실패 항목**: _______________
- **통과율**: _______________%

### 발견된 문제
1. **문제 1**: _______________
   - **발생 화면**: _______________
   - **재현 방법**: _______________
   - **심각도**: [ ] Critical [ ] High [ ] Medium [ ] Low

2. **문제 2**: _______________
   - **발생 화면**: _______________
   - **재현 방법**: _______________
   - **심각도**: [ ] Critical [ ] High [ ] Medium [ ] Low

---

## 📝 참고사항

- 모든 테스트는 실제 디바이스에서 수행하는 것을 권장합니다.
- 에뮬레이터에서는 일부 기능(갤러리 접근, 동영상 생성 등)이 제한될 수 있습니다.
- Logcat을 통해 상세한 로그를 확인하여 각 기능의 동작을 검증하세요.
- MVP v2.0의 핵심 기능(JSON 프레임 시스템, 동영상 생성)은 반드시 테스트해야 합니다.

---

**마지막 업데이트**: 2025년 1월 14일  
**문서 버전**: 1.0

